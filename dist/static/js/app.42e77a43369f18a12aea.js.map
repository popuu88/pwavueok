{"version":3,"sources":["webpack:///static/js/app.42e77a43369f18a12aea.js","webpack:///src/App.vue","webpack:///src/components/ChatRoom.vue","webpack:///./src/main.js","webpack:///./src/App.vue","webpack:///./src/App.vue?29c9","webpack:///./src/router/index.js","webpack:///./src/components/ChatRoom.vue","webpack:///./src/components/ChatRoom.vue?a10f"],"names":["webpackJsonp","module","__webpack_exports__","__webpack_require__","name","msgRef","firebase","database","ref","storageRef","storage","data","userNameSet","userName","messages","upload","progress","methods","setName","this","saveName","vm","document","querySelector","value","trim","getTime","now","Date","hours","getHours","minutes","getMinutes","sendMessage","e","message","shiftKey","length","preventDefault","push","type","timeStamp","sendImage","file","target","files","fileName","Math","floor","metadata","contentType","progressBar","uploadTask","child","put","on","TaskEvent","STATE_CHANGED","snapshot","bytesTransferred","totalBytes","setAttribute","error","code","downloadURL","readMore","previousElementSibling","mounted","val","updated","querySelectorAll","forEach","offsetHeight","roomBody","scrollTop","scrollHeight","Object","defineProperty","__WEBPACK_IMPORTED_MODULE_0_vue__","__WEBPACK_IMPORTED_MODULE_1__App__","__WEBPACK_IMPORTED_MODULE_2__router__","config","productionTip","el","router","template","components","App","injectStyle","ssrContext","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_App_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_4898d798_hasScoped_false_transformToRequire_video_src_poster_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_App_vue__","normalizeComponent","__vue_styles__","Component","exports","render","_vm","_h","$createElement","_c","_self","attrs","id","staticRenderFns","esExports","__WEBPACK_IMPORTED_MODULE_1_vue_router__","__WEBPACK_IMPORTED_MODULE_2__components_ChatRoom__","use","routes","path","component","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_ChatRoom_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_273fa103_hasScoped_true_transformToRequire_video_src_poster_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_ChatRoom_vue__","staticClass","_v","_m","_l","item","_s","click","$event","_e","src","directives","rawName","expression","class","disable","accept","change","keydown","_k","keyCode","key","maxlength","domProps","draggable"],"mappings":"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","file":"static/js/app.42e77a43369f18a12aea.js","sourcesContent":["webpackJsonp([1],[\n/* 0 */,\n/* 1 */,\n/* 2 */,\n/* 3 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n//\n//\n//\n//\n//\n//\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'app'\n});\n\n/***/ }),\n/* 4 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n// msgRef = firebase中的資料表/messages/，若沒有的會自動建立\nvar msgRef = firebase.database().ref('/messages/');\nvar storageRef = firebase.storage().ref('/images/');\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  // 指定此頁使用的name\n  name: 'ChatRoom',\n  // 資料位置，於html中可用{{}}渲染出來\n  data: function data() {\n    return {\n      userNameSet: false, // 姓名輸入框\n      userName: '', // 名稱\n      messages: [], // 訊息內容\n      upload: false, // 上傳進度框\n      progress: '' // 上傳進度%數\n    };\n  },\n\n  // 這個頁面的functions\n  methods: {\n    /** 彈出設定視窗 */\n    setName: function setName() {\n      var vm = this;\n      vm.userNameSet = true;\n    },\n\n    /** 儲存設定名稱 */\n    saveName: function saveName() {\n      // vue的mtthod中this是指export中這整塊的資料\n      var vm = this;\n      var userName = document.querySelector('#js-userName').value;\n      if (userName.trim() == '') {\n        return;\n      }\n      // 這裡的vm.userName(this.userName)就是data()裡面的userName\n      vm.userName = userName;\n      vm.userNameSet = false;\n    },\n\n    /** 取得時間 */\n    getTime: function getTime() {\n      var now = new Date();\n      var hours = now.getHours();\n      var minutes = now.getMinutes();\n      return (hours >= 12 ? \"下午\" : \"上午\") + ' ' + hours + ':' + (minutes < 10 ? '0' + minutes : minutes);\n    },\n\n    /** 傳送訊息 */\n    sendMessage: function sendMessage(e) {\n      var vm = this;\n      var userName = document.querySelector('#js-userName');\n      var message = document.querySelector('#js-message');\n      // 如果是按住shift則不傳送訊息(多行輸入)\n      if (e.shiftKey) {\n        return false;\n      }\n      // 如果輸入是空則不傳送訊息\n      if (message.value.length <= 1 && message.value.trim() == '') {\n        // 避免enter產生的空白換行\n        e.preventDefault();\n        return false;\n      }\n      // 對firebase的db做push，db只能接受json物件格式，若要用陣列要先轉字串來存\n      msgRef.push({\n        userName: userName.value,\n        type: 'text',\n        message: message.value,\n        // 取得時間，這裡的vm.getTime()就是method中的getTime\n        timeStamp: vm.getTime()\n      });\n      // 清空輸入欄位並避免enter產生的空白換行\n      message.value = '';\n      e.preventDefault();\n    },\n\n    /** 傳送圖片 */\n    sendImage: function sendImage(e) {\n      var vm = this;\n      var userName = document.querySelector('#js-userName');\n      // 取得上傳檔案的資料\n      var file = e.target.files[0];\n      var fileName = Math.floor(Date.now() / 1000) + ('_' + file.name);\n      var metadata = {\n        contentType: 'image/*'\n      };\n      // 取得HTML進度條元素\n      var progressBar = document.querySelector('#js-progressBar');\n      // 上傳資訊設定\n      var uploadTask = storageRef.child(fileName).put(file, metadata);\n      // 上傳狀態處理\n      uploadTask.on(firebase.storage.TaskEvent.STATE_CHANGED,\n      /* 上傳進度 */\n      function (snapshot) {\n        var progress = Math.floor(snapshot.bytesTransferred / snapshot.totalBytes * 100);\n        if (progress < 100) {\n          // 開啟進度條\n          vm.upload = true;\n          vm.progress = progress + '%';\n          progressBar.setAttribute('style', 'width:' + progress + '%');\n        }\n      },\n      /* 錯誤處理 */\n      function (error) {\n        msgRef.child('bug/').push({\n          userName: userName.value,\n          type: 'image',\n          message: error.code,\n          timeStamp: vm.getTime()\n        });\n      },\n      /* 上傳結束處理 */\n      function () {\n        var downloadURL = uploadTask.snapshot.downloadURL;\n        msgRef.push({\n          userName: userName.value,\n          type: 'image',\n          message: downloadURL,\n          timeStamp: vm.getTime()\n        });\n        // 關閉進度條\n        vm.upload = false;\n      });\n    },\n\n    /** 顯示更多 */\n    readMore: function readMore(e) {\n      // 把內容高度限制取消\n      e.target.previousElementSibling.setAttribute('style', 'max-height: 100%;');\n      // 隱藏\"顯示更多\"按紐\n      e.target.setAttribute('style', 'display: none;');\n    }\n  },\n  // mounted是vue的生命週期之一，代表模板已編譯完成，已經取值準備渲染元件了\n  mounted: function mounted() {\n    var vm = this;\n    msgRef.on('value', function (snapshot) {\n      var val = snapshot.val();\n      vm.messages = val;\n    });\n  },\n\n  // update是vue的生命週期之一，在元件渲染完成後執行\n  updated: function updated() {\n    // 判斷內容高度超過300就隱藏起來，把\"顯示更多\"按紐打開\n    var messages = document.querySelectorAll('.messageBox__message');\n    messages.forEach(function (message) {\n      if (message.offsetHeight > 300) {\n        message.querySelector('.messageBox__readMore').setAttribute('style', 'display: block');\n      }\n    });\n    // 當畫面渲染完成，把聊天視窗滾到最底部(讀取最新消息)\n    var roomBody = document.querySelector('#js-roomBody');\n    roomBody.scrollTop = roomBody.scrollHeight;\n  }\n});\n\n/***/ }),\n/* 5 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__router__ = __webpack_require__(13);\n// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].config.productionTip = false;\n\n/* eslint-disable no-new */\nnew __WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */]({\n  el: '#app',\n  router: __WEBPACK_IMPORTED_MODULE_2__router__[\"a\" /* default */],\n  template: '<App/>',\n  components: { App: __WEBPACK_IMPORTED_MODULE_1__App__[\"a\" /* default */] }\n});\n\n/***/ }),\n/* 6 */,\n/* 7 */,\n/* 8 */,\n/* 9 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_App_vue__ = __webpack_require__(3);\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_4898d798_hasScoped_false_transformToRequire_video_src_poster_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_App_vue__ = __webpack_require__(12);\nfunction injectStyle (ssrContext) {\n  __webpack_require__(10)\n}\nvar normalizeComponent = __webpack_require__(2)\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_App_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_4898d798_hasScoped_false_transformToRequire_video_src_poster_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_App_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 11 */,\n/* 12 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n/* 13 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vue_router__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__components_ChatRoom__ = __webpack_require__(15);\n/* import Vue from 'vue'\nimport Router from 'vue-router'\nimport Hello from '@/components/Hello'\n\nVue.use(Router)\n\nexport default new Router({\n  routes: [\n    {\n      path: '/',\n      name: 'Hello',\n      component: Hello\n    }\n  ]\n})\n */\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].use(__WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (new __WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]({\n  routes: [{\n    path: '/',\n    name: 'ChatRoom',\n    component: __WEBPACK_IMPORTED_MODULE_2__components_ChatRoom__[\"a\" /* default */]\n  }]\n}));\n\n/***/ }),\n/* 14 */,\n/* 15 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_ChatRoom_vue__ = __webpack_require__(4);\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_273fa103_hasScoped_true_transformToRequire_video_src_poster_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_ChatRoom_vue__ = __webpack_require__(17);\nfunction injectStyle (ssrContext) {\n  __webpack_require__(16)\n}\nvar normalizeComponent = __webpack_require__(2)\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-273fa103\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_ChatRoom_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_273fa103_hasScoped_true_transformToRequire_video_src_poster_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_ChatRoom_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 17 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"name\"}),_vm._v(\" \"),_c('div',{staticClass:\"chatRoom\"},[_vm._m(0),_vm._v(\" \"),_c('div',{staticClass:\"roomBody\",attrs:{\"id\":\"js-roomBody\"}},[_vm._l((_vm.messages),function(item){return [(item.userName != _vm.userName)?[_c('div',{staticClass:\"messageBox\"},[_c('div',{staticClass:\"messageBox__content\"},[(item.type == 'text')?_c('div',{staticClass:\"messageBox__message\"},[_c('div',{staticClass:\"messageBox__text\"},[_vm._v(_vm._s(item.message))]),_vm._v(\" \"),_c('div',{staticClass:\"messageBox__readMore\",on:{\"click\":function($event){_vm.readMore($event)}}},[_vm._v(\"顯示更多\")])]):_vm._e(),_vm._v(\" \"),(item.type == 'image')?_c('div',{staticClass:\"messageBox__image\"},[_c('img',{attrs:{\"src\":item.message}})]):_vm._e()])])]:_vm._e(),_vm._v(\" \"),(item.userName == _vm.userName)?[_c('div',{staticClass:\"messageBox messageBox--self\"},[_c('div',{staticClass:\"messageBox__content\"},[(item.type == 'text')?_c('div',{staticClass:\"messageBox__message\"},[_c('div',{staticClass:\"messageBox__text\"},[_vm._v(_vm._s(item.message))])]):_vm._e(),_vm._v(\" \"),(item.type == 'image')?_c('div',{staticClass:\"messageBox__image\"},[_c('img',{attrs:{\"src\":item.message}})]):_vm._e()])])]:_vm._e()]}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.upload),expression:\"upload\"}],staticClass:\"messageBox messageBox--self\"},[_c('div',{staticClass:\"messageBox__progress\"},[_c('div',{staticClass:\"messageBox__progress--state\",attrs:{\"id\":\"js-progressBar\"}}),_vm._v(\" \"),_c('div',{staticClass:\"messageBox__progress--number\"},[_vm._v(_vm._s(_vm.progress))])])])],2),_vm._v(\" \"),_c('div',{staticClass:\"roomBottom\",class:{ disable: !_vm.userName }},[_c('div',{staticClass:\"roomBottom__tools\"},[_c('div',{staticClass:\"roomBottom__tools_upload\"},[_c('input',{attrs:{\"type\":\"file\",\"accept\":\"image/*\"},on:{\"change\":function($event){_vm.sendImage($event)}}})])]),_vm._v(\" \"),_c('div',{staticClass:\"roomBottom__input\"},[_c('textarea',{staticClass:\"roomBottom__input__textarea\",class:{ disable: !_vm.userName },attrs:{\"id\":\"js-message\"},on:{\"keydown\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }_vm.sendMessage($event)}}})])])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.userNameSet || _vm.userName == ''),expression:\"userNameSet || userName == ''\"}],staticClass:\"modal\"},[_c('div',{staticClass:\"modal__container\"},[_vm._m(1),_vm._v(\" \"),_c('div',{staticClass:\"modal__body\"},[_c('input',{staticClass:\"userName\",attrs:{\"type\":\"text\",\"id\":\"js-userName\",\"maxlength\":\"6\"},domProps:{\"value\":_vm.userName},on:{\"keydown\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }_vm.saveName()}}}),_vm._v(\" \"),_c('div',{staticClass:\"button\",on:{\"click\":function($event){_vm.saveName()}}},[_vm._v(\"設定\")])]),_vm._v(\" \"),_c('footer',{staticClass:\"modal__footer\"})])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"roomHead\"},[_c('div',{staticClass:\"roomHead__topButtons\"},[_c('div',{staticClass:\"roomHead__button close\"}),_vm._v(\" \"),_c('div',{staticClass:\"roomHead__button minimize\"}),_vm._v(\" \"),_c('div',{staticClass:\"roomHead__button zoom\"})]),_vm._v(\" \"),_c('img',{staticClass:\"roomHead__img\",attrs:{\"src\":\"https://lorempixel.com/50/50/\",\"draggable\":\"false\"}}),_vm._v(\" \"),_c('div',{staticClass:\"roomHead__title\"},[_vm._v(\"Test Room\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('header',{staticClass:\"modal__header\"},[_c('h2',{staticClass:\"view-title\"},[_vm._v(\"輸入名稱\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ })\n],[5]);\n\n\n// WEBPACK FOOTER //\n// static/js/app.42e77a43369f18a12aea.js","<template>\n  <div id=\"app\">\n    <router-view></router-view>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'app'\n}\n</script>\n\n<style>\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","<template>\r\n  <div class=\"container\">\r\n    <!-- 區塊：name area -->\r\n    <div class=\"name\">\r\n      <!-- <h3>Name：{{ userName }}</h3> -->\r\n      <!-- 註解：使用@click來偵測click，觸發時執行method中的setName() -->\r\n      <!-- <div class=\"reset\" @click=\"setName()\">Reset Name</div> -->\r\n    </div>\r\n    <!-- 區塊：chat room -->\r\n    <div class=\"chatRoom\">\r\n      <!-- 區塊：head -->\r\n      <div class=\"roomHead\">\r\n        <div class=\"roomHead__topButtons\">\r\n          <div class=\"roomHead__button close\"></div>\r\n          <div class=\"roomHead__button minimize\"></div>\r\n          <div class=\"roomHead__button zoom\"></div>\r\n        </div>\r\n        <img src=\"https://lorempixel.com/50/50/\" class=\"roomHead__img\" draggable=\"false\">\r\n        <div class=\"roomHead__title\">Test Room</div>\r\n      </div>\r\n      <!-- 區塊：body -->\r\n      <div id=\"js-roomBody\" class=\"roomBody\">\r\n        <!-- 註解：使用template來當迴圈容器，或是判斷用的容器，當條件達成時產出template內容 -->\r\n        <template v-for=\"item in messages\">\r\n          <!-- other people -->\r\n          <template v-if=\"item.userName != userName\">\r\n            <div class=\"messageBox\">\r\n             <!--  <img src=\"https://lorempixel.com/40/40/\" class=\"messageBox__user\" draggable=\"false\"> -->\r\n              <div class=\"messageBox__content\">\r\n                <!-- 註解：Vue使用雙花括號{{}}來顯示script中data:的資料 -->\r\n                <!-- <div class=\"messageBox__name\">{{item.userName}}</div> -->\r\n                <div v-if=\"item.type == 'text'\" class=\"messageBox__message\">\r\n                  <div class=\"messageBox__text\">{{item.message}}</div>\r\n                  <div class=\"messageBox__readMore\" @click=\"readMore($event)\">顯示更多</div>\r\n                </div>\r\n                <div v-if=\"item.type == 'image'\" class=\"messageBox__image\"><img :src=\"item.message\"></div>\r\n              </div>\r\n              <!-- <div class=\"messageBox__time\">{{item.timeStamp}}</div> -->\r\n            </div>\r\n          </template>\r\n          <!-- 區塊：self -->\r\n          <template v-if=\"item.userName == userName\">\r\n            <div class=\"messageBox messageBox--self\">\r\n              <!-- <div class=\"messageBox__time\">{{item.timeStamp}}</div> -->\r\n              <div class=\"messageBox__content\">\r\n                <div v-if=\"item.type == 'text'\" class=\"messageBox__message\">\r\n                  <div class=\"messageBox__text\">{{item.message}}</div>\r\n                </div>\r\n                <div v-if=\"item.type == 'image'\" class=\"messageBox__image\"><img :src=\"item.message\"></div>\r\n              </div>\r\n            </div>\r\n          </template>\r\n        </template>\r\n        <!-- 區塊：上傳進度條 -->\r\n        <div v-show=\"upload\" class=\"messageBox messageBox--self\">\r\n          <div class=\"messageBox__progress\">\r\n            <div id=\"js-progressBar\" class=\"messageBox__progress--state\"></div>\r\n            <div class=\"messageBox__progress--number\">{{progress}}</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!-- 區塊：bottom -->\r\n      <!-- 註解：使用:class來寫class是否顯示的判斷式{ class: 判斷式 } -->\r\n      <div class=\"roomBottom\" :class=\"{ disable: !userName }\">\r\n        <div class=\"roomBottom__tools\">\r\n          <div class=\"roomBottom__tools_upload\">\r\n            <input type=\"file\" accept=\"image/*\" @change=\"sendImage($event)\">\r\n            <!-- <img src=\"../assets/tools_file.png\"> -->\r\n          </div>\r\n        </div>\r\n        <div class=\"roomBottom__input\">\r\n          <!-- 若要再帶入原生js的event(e)到function中，必須使用$event當參數傳入 -->\r\n          <textarea id=\"js-message\" class=\"roomBottom__input__textarea\" :class=\"{ disable: !userName }\" @keydown.enter=\"sendMessage($event)\"></textarea>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- 區塊：modal -->\r\n    <div v-show=\"userNameSet || userName == ''\" class=\"modal\">\r\n      <div class=\"modal__container\">\r\n        <header class=\"modal__header\">\r\n          <h2 class=\"view-title\">輸入名稱</h2>\r\n        </header>\r\n        <div class=\"modal__body\">\r\n          <!-- 註解：使用@keydown.enter來偵測keydown enter，觸發時執行method中的saveName() -->\r\n          <input type=\"text\" id=\"js-userName\" class=\"userName\" maxlength=\"6\" @keydown.enter=\"saveName()\" :value=\"userName\">\r\n          <div class=\"button\" @click=\"saveName()\">設定</div>\r\n        </div>\r\n        <footer class=\"modal__footer\"></footer>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// msgRef = firebase中的資料表/messages/，若沒有的會自動建立\r\nconst msgRef = firebase.database().ref('/messages/');\r\nconst storageRef = firebase.storage().ref('/images/');\r\nexport default {\r\n  // 指定此頁使用的name\r\n  name: 'ChatRoom',\r\n  // 資料位置，於html中可用{{}}渲染出來\r\n  data() {\r\n    return {\r\n      userNameSet: false, // 姓名輸入框\r\n      userName: '', // 名稱\r\n      messages: [], // 訊息內容\r\n      upload: false, // 上傳進度框\r\n      progress: '' // 上傳進度%數\r\n    }\r\n  },\r\n  // 這個頁面的functions\r\n  methods: {\r\n    /** 彈出設定視窗 */\r\n    setName() {\r\n      const vm = this;\r\n      vm.userNameSet = true;\r\n    },\r\n    /** 儲存設定名稱 */\r\n    saveName() {\r\n      // vue的mtthod中this是指export中這整塊的資料\r\n      const vm = this;\r\n      const userName = document.querySelector('#js-userName').value;\r\n      if (userName.trim() == '') { return; }\r\n      // 這裡的vm.userName(this.userName)就是data()裡面的userName\r\n      vm.userName = userName;\r\n      vm.userNameSet = false;\r\n    },\r\n    /** 取得時間 */\r\n    getTime() {\r\n      const now = new Date();\r\n      const hours = now.getHours();\r\n      const minutes = now.getMinutes();\r\n      return `${(hours >= 12) ? \"下午\" : \"上午\"} ${hours}:${(minutes < 10) ? '0' + minutes : minutes}`;\r\n    },\r\n    /** 傳送訊息 */\r\n    sendMessage(e) {\r\n      const vm = this;\r\n      const userName = document.querySelector('#js-userName');\r\n      let message = document.querySelector('#js-message');\r\n      // 如果是按住shift則不傳送訊息(多行輸入)\r\n      if (e.shiftKey) {\r\n        return false;\r\n      }\r\n      // 如果輸入是空則不傳送訊息\r\n      if (message.value.length <= 1 && message.value.trim() == '') {\r\n        // 避免enter產生的空白換行\r\n        e.preventDefault();\r\n        return false;\r\n      }\r\n      // 對firebase的db做push，db只能接受json物件格式，若要用陣列要先轉字串來存\r\n      msgRef.push({\r\n        userName: userName.value,\r\n        type: 'text',\r\n        message: message.value,\r\n        // 取得時間，這裡的vm.getTime()就是method中的getTime\r\n        timeStamp: vm.getTime()\r\n      })\r\n      // 清空輸入欄位並避免enter產生的空白換行\r\n      message.value = '';\r\n      e.preventDefault();\r\n    },\r\n    /** 傳送圖片 */\r\n    sendImage(e) {\r\n      const vm = this;\r\n      const userName = document.querySelector('#js-userName');\r\n      // 取得上傳檔案的資料\r\n      const file = e.target.files[0];\r\n      const fileName = Math.floor(Date.now() / 1000) + `_${file.name}`;\r\n      const metadata = {\r\n        contentType: 'image/*'\r\n      };\r\n      // 取得HTML進度條元素\r\n      let progressBar = document.querySelector('#js-progressBar');\r\n      // 上傳資訊設定\r\n      const uploadTask = storageRef.child(fileName).put(file, metadata);\r\n      // 上傳狀態處理\r\n      uploadTask.on(firebase.storage.TaskEvent.STATE_CHANGED,\r\n        /* 上傳進度 */\r\n        function(snapshot) {\r\n          let progress = Math.floor((snapshot.bytesTransferred / snapshot.totalBytes) * 100);\r\n          if (progress < 100) {\r\n            // 開啟進度條\r\n            vm.upload = true;\r\n            vm.progress = `${progress}%`;\r\n            progressBar.setAttribute('style', `width:${progress}%`);\r\n          }\r\n        },\r\n        /* 錯誤處理 */\r\n        function(error) {\r\n          msgRef.child('bug/').push({\r\n            userName: userName.value,\r\n            type: 'image',\r\n            message: error.code,\r\n            timeStamp: vm.getTime()\r\n          })\r\n        },\r\n        /* 上傳結束處理 */\r\n        function() {\r\n          var downloadURL = uploadTask.snapshot.downloadURL;\r\n          msgRef.push({\r\n            userName: userName.value,\r\n            type: 'image',\r\n            message: downloadURL,\r\n            timeStamp: vm.getTime()\r\n          })\r\n          // 關閉進度條\r\n          vm.upload = false;\r\n        });\r\n    },\r\n    /** 顯示更多 */\r\n    readMore(e) {\r\n      // 把內容高度限制取消\r\n      e.target.previousElementSibling.setAttribute('style', 'max-height: 100%;')\r\n      // 隱藏\"顯示更多\"按紐\r\n      e.target.setAttribute('style', 'display: none;');\r\n    }\r\n  },\r\n  // mounted是vue的生命週期之一，代表模板已編譯完成，已經取值準備渲染元件了\r\n  mounted() {\r\n    const vm = this;\r\n    msgRef.on('value', function(snapshot) {\r\n      const val = snapshot.val();\r\n      vm.messages = val;\r\n    })\r\n  },\r\n  // update是vue的生命週期之一，在元件渲染完成後執行\r\n  updated() {\r\n    // 判斷內容高度超過300就隱藏起來，把\"顯示更多\"按紐打開\r\n    const messages = document.querySelectorAll('.messageBox__message');\r\n    messages.forEach((message) => {\r\n      if (message.offsetHeight > 300) {\r\n        message.querySelector('.messageBox__readMore').setAttribute('style', 'display: block');\r\n      }\r\n    })\r\n    // 當畫面渲染完成，把聊天視窗滾到最底部(讀取最新消息)\r\n    const roomBody = document.querySelector('#js-roomBody');\r\n    roomBody.scrollTop = roomBody.scrollHeight;\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n* {\r\n  font-family: '微軟正黑體';\r\n  margin: auto;\r\n}\r\n.container {\r\n  padding: 10px 30px 0px 0px;\r\n}\r\n.name {\r\n  text-align: center;\r\n  margin: 10px 50px 10px 0px;\r\n  color: #333333;\r\n}\r\n.reset {\r\n  margin-top: 10px;\r\n  padding: 5px 10px;\r\n  border-radius: 10px;\r\n  font-weight: 600;\r\n  color: #333333;\r\n  background-color: #CCCCCC;\r\n  display: inline-block;\r\n  cursor: pointer;\r\n}\r\n.chatRoom {\r\n  border-radius: 5px;\r\n  max-width: 500px;\r\n  box-shadow: 0 14px 28px rgba(0, 0, 0, 0.25), 0 10px 10px rgba(0, 0, 0, 0.22);\r\n}\r\n\r\n/* Head */\r\n.roomHead {\r\n  width: 100%;\r\n  height: 85px;\r\n  border-radius: 5px 5px 0px 0px;\r\n  background-color: #2B364B;\r\n  position: relative;\r\n}\r\n.roomHead__topButtons {\r\n  padding: 2px 0px 5px 10px;\r\n  text-align: left;\r\n}\r\n.roomHead__button {\r\n  height: 10px;\r\n  width: 10px;\r\n  border-radius: 50%;\r\n  margin: 0px 1px;\r\n  display: inline-block;\r\n  cursor: pointer;\r\n}\r\n.close {\r\n  background-color: #FF625A;\r\n}\r\n.minimize {\r\n  background-color: #FFC02F;\r\n}\r\n.zoom {\r\n  background-color: #28CB40;\r\n}\r\n.roomHead__img {\r\n  width: 50px;\r\n  height: 50px;\r\n  margin: 0px 10px 6px 12px;\r\n  border-radius: 50%;\r\n  position: absolute;\r\n  cursor: pointer;\r\n}\r\n.roomHead__title {\r\n  font-size: 13px;\r\n  font-weight: 600;\r\n  color: #FFFFFF;\r\n  height: 80px;\r\n  margin: 5px 0px 0px 75px;\r\n  position: absolute;\r\n  cursor: pointer;\r\n}\r\n\r\n/* Body */\r\n.roomBody {\r\n  padding: 10px 0px;\r\n  background-color: #fff;\r\n  height: 60vh;\r\n  overflow-y: auto;\r\n  overflow-x: hidden;\r\n}\r\n.messageBox {\r\n  padding: 5px 10px;\r\n  position: relative;\r\n}\r\n.messageBox__user {\r\n  height: 40px;\r\n  width: 40px;\r\n  border-radius: 50%;\r\n  vertical-align: top;\r\n  display: inline-block;\r\n  cursor: pointer;\r\n}\r\n.messageBox__content {\r\n  max-width: 70%;\r\n  display: inline-block;\r\n}\r\n.messageBox__name {\r\n  margin: 5px 0px 5px 5px;\r\n  font-size: 13px;\r\n  color: #727C8A;\r\n  vertical-align: top;\r\n  cursor: pointer;\r\n}\r\n.messageBox__message {\r\n  margin: 5px 0px 5px 5px;\r\n  font-size: 12px;\r\n  color: #35393D;\r\n  letter-spacing: 0.6px;\r\n  background-color: #E3E8EB;\r\n  border-radius: 12px;\r\n  line-height: 1.5;\r\n  text-align: left;\r\n  word-break: break-all;\r\n  /*：與html的<pre></pre>同效果，可以使textarea的換行元素正常顯示 */\r\n  white-space: pre-line;\r\n}\r\n.messageBox__text {\r\n  padding: 8px 10px 9px 11px;\r\n  max-height: 300px;\r\n  overflow: hidden;\r\n}\r\n.messageBox__readMore {\r\n  border-top: 1px solid #D9DBDD;\r\n  margin-top: 6px;\r\n  padding: 6px 13px 10px 13px;\r\n  left: 0;\r\n  right: 0;\r\n  cursor: pointer;\r\n  display: none;\r\n}\r\n.messageBox__image {\r\n  margin: 5px 25px 5px 5px;\r\n}\r\n.messageBox__image img {\r\n  border-radius: 5px;\r\n  max-width: 100%;\r\n  max-height: 335px;\r\n}\r\n.messageBox__time {\r\n  transform: scale(0.7);\r\n  color: #ACB0B8;\r\n  vertical-align: bottom;\r\n  margin: 0px 0px 5px -12px;\r\n  display: inline-block;\r\n}\r\n.messageBox__progress {\r\n  width: 25%;\r\n  margin-right: 60px;\r\n  border-radius: 5px;\r\n  background-color: #D4D9E1;\r\n  height: 6px;\r\n}\r\n.messageBox__progress--state {\r\n  background-color: #00CE00;\r\n  height: 6px;\r\n  width: 10%;\r\n  border-radius: 5px;\r\n  float: right;\r\n}\r\n.messageBox__progress--number {\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  font-size: 12px;\r\n  color: #B7B7B7;\r\n  margin-right: 35px;\r\n}\r\n.messageBox--self {\r\n  text-align: right;\r\n}\r\n.messageBox--self .messageBox__message {\r\n  background-color: #AFF47E;\r\n  margin-right: 25px;\r\n}\r\n.messageBox--self .messageBox__message__text {\r\n  padding: 8px 10px 9px 11px;\r\n  max-height: 100%;\r\n  overflow: unset;\r\n}\r\n.messageBox--self .messageBox__time {\r\n  margin: 0px -16px 5px 0px;\r\n}\r\n\r\n/* Bottom */\r\n.roomBottom {\r\n  bottom: 0px;\r\n  border-radius: 0px 0px 5px 5px;\r\n  background-color: #FFFFFF;\r\n}\r\n.roomBottom__tools {\r\n  border-top: solid 1px #E7E7E7;\r\n  border-bottom: solid 2px #E7E7E7;\r\n  background-color: #F6F6F6;\r\n  height: 30px;\r\n  padding: 0px 5px;\r\n}\r\n.roomBottom__tools_upload {\r\n  height: 20px;\r\n  margin: 5px;\r\n  padding: 1px;\r\n  display: inline-block;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n.roomBottom__tools_upload:hover {\r\n  border: solid 1px #DCDCDC;\r\n}\r\n.roomBottom__tools_upload input {\r\n  width: 100%;\r\n  height: 100%;\r\n  left: 0;\r\n  right: 0;\r\n  opacity: 0;\r\n  position: absolute;\r\n  cursor: pointer;\r\n  /* 讓input file可以支援pointer要加pl100% */\r\n  padding-left: 100%;\r\n}\r\n.roomBottom__tools_upload img {\r\n  height: 100%;\r\n}\r\n.roomBottom__input {\r\n  padding: 10px 10px 5px 10px;\r\n}\r\n.roomBottom__input__textarea {\r\n  width: 100%;\r\n  height: 60px;\r\n  border: none;\r\n  resize: none;\r\n  outline: none;\r\n}\r\n\r\n/* status */\r\n.disable {\r\n  pointer-events: none;\r\n  background-color: #ebebeb;\r\n}\r\n\r\n/* modal */\r\n.modal {\r\n  z-index: 3;\r\n  padding: 50px 0px;\r\n  position: fixed;\r\n  left: 0;\r\n  top: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  overflow: auto;\r\n  background-color: rgba(0, 0, 0, 0.4);\r\n  animation: opac 0.8s;\r\n  letter-spacing: 2px;\r\n  text-align: unset;\r\n}\r\n.modal__container {\r\n  margin: auto;\r\n  position: relative;\r\n  padding: 10px;\r\n  outline: 0;\r\n  max-width: 300px;\r\n}\r\n.modal__header {\r\n  color: #fff;\r\n  background-color: #2B364B;\r\n  padding: 10px;\r\n  text-align: center;\r\n  border-radius: 5px 5px 0px 0px;\r\n}\r\n.modal__body {\r\n  background-color: #fff;\r\n  padding: 20px 50px;\r\n  text-align: center;\r\n}\r\n.modal__body p {\r\n  text-align: left;\r\n  line-height: 24px;\r\n}\r\n.modal__img {\r\n  max-width: 100%;\r\n}\r\n.modal__footer {\r\n  color: #fff;\r\n  background-color: #2B364B;\r\n  height: 8px;\r\n  border-radius: 0px 0px 5px 5px;\r\n}\r\n\r\n/* name set */\r\n.userName {\r\n  height: 30px;\r\n  font-size: 16px;\r\n  margin-bottom: 10px;\r\n  border: solid 1px #cbcbcb;\r\n  width: 70%;\r\n  text-align: center;\r\n  display: inline-block;\r\n}\r\n.button {\r\n  font-size: 14px;\r\n  color: #FFFFFF;\r\n  background-color: #2B364B;\r\n  padding: 10px 20px;\r\n  display: inline-block;\r\n  cursor: pointer;\r\n}\r\n\r\n/* media */\r\n\r\n@media screen and (max-width: 425px) {\r\n  .messageBox__content {\r\n    max-width: 60%;\r\n  }\r\n}\r\n\r\n@media screen and (max-width: 385px) {\r\n  .messageBox__content {\r\n    max-width: 50%;\r\n  }\r\n}\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/ChatRoom.vue","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\nimport router from './router'\n\nVue.config.productionTip = false\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  router,\n  template: '<App/>',\n  components: { App }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4898d798\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4898d798\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = 9\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4898d798\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = 12\n// module chunks = 1","/* import Vue from 'vue'\nimport Router from 'vue-router'\nimport Hello from '@/components/Hello'\n\nVue.use(Router)\n\nexport default new Router({\n  routes: [\n    {\n      path: '/',\n      name: 'Hello',\n      component: Hello\n    }\n  ]\n})\n */\n\nimport Vue from 'vue'\nimport Router from 'vue-router'\nimport ChatRoom from '@/components/ChatRoom'\n\nVue.use(Router)\n\nexport default new Router({\n  routes: [\n    {\n      path: '/',\n      name: 'ChatRoom',\n      component: ChatRoom\n    }\n  ]\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-273fa103\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ChatRoom.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ChatRoom.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ChatRoom.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-273fa103\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./ChatRoom.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-273fa103\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/ChatRoom.vue\n// module id = 15\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"name\"}),_vm._v(\" \"),_c('div',{staticClass:\"chatRoom\"},[_vm._m(0),_vm._v(\" \"),_c('div',{staticClass:\"roomBody\",attrs:{\"id\":\"js-roomBody\"}},[_vm._l((_vm.messages),function(item){return [(item.userName != _vm.userName)?[_c('div',{staticClass:\"messageBox\"},[_c('div',{staticClass:\"messageBox__content\"},[(item.type == 'text')?_c('div',{staticClass:\"messageBox__message\"},[_c('div',{staticClass:\"messageBox__text\"},[_vm._v(_vm._s(item.message))]),_vm._v(\" \"),_c('div',{staticClass:\"messageBox__readMore\",on:{\"click\":function($event){_vm.readMore($event)}}},[_vm._v(\"顯示更多\")])]):_vm._e(),_vm._v(\" \"),(item.type == 'image')?_c('div',{staticClass:\"messageBox__image\"},[_c('img',{attrs:{\"src\":item.message}})]):_vm._e()])])]:_vm._e(),_vm._v(\" \"),(item.userName == _vm.userName)?[_c('div',{staticClass:\"messageBox messageBox--self\"},[_c('div',{staticClass:\"messageBox__content\"},[(item.type == 'text')?_c('div',{staticClass:\"messageBox__message\"},[_c('div',{staticClass:\"messageBox__text\"},[_vm._v(_vm._s(item.message))])]):_vm._e(),_vm._v(\" \"),(item.type == 'image')?_c('div',{staticClass:\"messageBox__image\"},[_c('img',{attrs:{\"src\":item.message}})]):_vm._e()])])]:_vm._e()]}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.upload),expression:\"upload\"}],staticClass:\"messageBox messageBox--self\"},[_c('div',{staticClass:\"messageBox__progress\"},[_c('div',{staticClass:\"messageBox__progress--state\",attrs:{\"id\":\"js-progressBar\"}}),_vm._v(\" \"),_c('div',{staticClass:\"messageBox__progress--number\"},[_vm._v(_vm._s(_vm.progress))])])])],2),_vm._v(\" \"),_c('div',{staticClass:\"roomBottom\",class:{ disable: !_vm.userName }},[_c('div',{staticClass:\"roomBottom__tools\"},[_c('div',{staticClass:\"roomBottom__tools_upload\"},[_c('input',{attrs:{\"type\":\"file\",\"accept\":\"image/*\"},on:{\"change\":function($event){_vm.sendImage($event)}}})])]),_vm._v(\" \"),_c('div',{staticClass:\"roomBottom__input\"},[_c('textarea',{staticClass:\"roomBottom__input__textarea\",class:{ disable: !_vm.userName },attrs:{\"id\":\"js-message\"},on:{\"keydown\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }_vm.sendMessage($event)}}})])])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.userNameSet || _vm.userName == ''),expression:\"userNameSet || userName == ''\"}],staticClass:\"modal\"},[_c('div',{staticClass:\"modal__container\"},[_vm._m(1),_vm._v(\" \"),_c('div',{staticClass:\"modal__body\"},[_c('input',{staticClass:\"userName\",attrs:{\"type\":\"text\",\"id\":\"js-userName\",\"maxlength\":\"6\"},domProps:{\"value\":_vm.userName},on:{\"keydown\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }_vm.saveName()}}}),_vm._v(\" \"),_c('div',{staticClass:\"button\",on:{\"click\":function($event){_vm.saveName()}}},[_vm._v(\"設定\")])]),_vm._v(\" \"),_c('footer',{staticClass:\"modal__footer\"})])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"roomHead\"},[_c('div',{staticClass:\"roomHead__topButtons\"},[_c('div',{staticClass:\"roomHead__button close\"}),_vm._v(\" \"),_c('div',{staticClass:\"roomHead__button minimize\"}),_vm._v(\" \"),_c('div',{staticClass:\"roomHead__button zoom\"})]),_vm._v(\" \"),_c('img',{staticClass:\"roomHead__img\",attrs:{\"src\":\"https://lorempixel.com/50/50/\",\"draggable\":\"false\"}}),_vm._v(\" \"),_c('div',{staticClass:\"roomHead__title\"},[_vm._v(\"Test Room\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('header',{staticClass:\"modal__header\"},[_c('h2',{staticClass:\"view-title\"},[_vm._v(\"輸入名稱\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-273fa103\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/ChatRoom.vue\n// module id = 17\n// module chunks = 1"],"sourceRoot":""}